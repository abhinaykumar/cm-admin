{"ast":null,"code":"var currentRequest = null; // Main method which will structure the existing filter values with the newly\n// applied filter. Send and receive the value from the backend.\n\nvar getFilteredData = function (filterType, filterValue, filterColumn = null) {\n  var url = window.location.pathname; // Based on the value changed for recent filter generate the filterParams hash\n\n  var filterParams = {};\n\n  if (filterColumn) {\n    filterParams[filterType] = {};\n    filterParams[filterType][filterColumn] = filterValue;\n  } else {\n    filterParams[filterType] = filterValue;\n  } // TODO add sort params in the queryString\n  // page params is reinitialized to 1 when any new filter value is applied so\n  // that it won't throw the error when the user doesn't have sufficent data\n  // to display on the table.\n\n\n  var queryString = {\n    filters: filterParams,\n    page: 1\n  }; // Generate the queryString by concatenating the filterParams and\n  // searchParams that are already applied, if searchParams are present.\n\n  var searchParams = window.location.search;\n\n  if (searchParams.length > 0) {\n    // Delete the previous applied value for multi_select filter from the\n    // searchParams as altering the array with new and old value will create\n    // more complicated logic. The new value is passed and structured in\n    // filterParams and will be concadinated with the searchParams post deletion\n    if (filterType == 'multi_select') {\n      searchParams = getParamsAsObject(searchParams);\n\n      if (searchParams['filters'][filterType] != undefined) {\n        delete searchParams['filters'][filterType][filterColumn];\n      }\n\n      searchParams = jQuery.param(searchParams);\n    }\n\n    filterParams = jQuery.param(queryString);\n    var availableParams = searchParams + '&' + filterParams;\n    queryString = getParamsAsObject(availableParams);\n  }\n\n  return currentRequest = $.ajax(url, {\n    type: 'GET',\n    data: queryString,\n    beforeSend: function () {\n      if (currentRequest !== null) {\n        currentRequest.abort();\n      }\n    },\n    success: function (data) {\n      var queryParam = jQuery.param(queryString);\n      window.history.pushState(\"\", \"\", url + '?' + queryParam);\n      $('.index-page__table-container').html(data);\n    },\n    error: function (jqxhr, textStatus, errorThrown) {\n      console.log(errorThrown, textStatus);\n    }\n  });\n}; // Generate or remove elements of the dropdown based on the search value.\n\n\nvar dropdownFilterSearch = function (element) {\n  var filter = element.val().toUpperCase();\n  var dropdownElements = element.parents(':nth(1)').find('.list-area').children();\n\n  for (var i = 0; i < dropdownElements.length; i++) {\n    txtValue = $(dropdownElements[i]).children().text();\n\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n      $(dropdownElements[i]).css('display', 'flex');\n    } else {\n      $(dropdownElements[i]).css('display', 'none');\n    }\n  }\n};\n\n$(document).on('change', '[data-behaviour=\"filter\"]', function (e) {\n  var filterType = $(this).data('filter-type');\n  var filterColumn = $(this).data('db-column');\n\n  if (filterType == 'range') {\n    var rangeElements = $(this).parent().children();\n    var filterValue = $(rangeElements[0]).val() + ' to ' + $(rangeElements[1]).val();\n  } else {\n    var filterValue = $(this).val();\n  }\n\n  $(this).parents(':nth(1)').children(':first').children(':nth(1)').text(filterValue);\n  $(this).parents(':nth(1)').children(':first').children(':last').removeClass('hidden');\n  unhideClearFilterBtn(filterValue);\n  getFilteredData(filterType, filterValue, filterColumn);\n});\n$(document).on('keyup', '.search-input', function (e) {\n  e.stopPropagation();\n  var searchValue = $(this).val();\n  unhideClearFilterBtn(searchValue);\n  getFilteredData('search', searchValue);\n});\n$(document).on('click', '[data-behaviour=\"filter-option\"]', function (e) {\n  var filterType = $(this).data('filter-type');\n  var filterColumn = $(this).data('db-column'); // Clear the search value post selection and regenerate the dropdown elements.\n\n  var searchInputElement = $(this).parents(':nth(1)').children(':first').children();\n  searchInputElement.val('');\n  dropdownFilterSearch(searchInputElement);\n  unhideFilter(filterType, filterColumn);\n});\n\nvar unhideFilter = function (filterType, filterColumn) {\n  var filterInputElement = $('[data-behaviour=\"filter-input\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']');\n  filterInputElement.parent().removeClass('hidden');\n  filterInputElement.click();\n}; // Search inside the dropdowns\n\n\n$(document).on('keyup', '[data-behaviour=\"dropdown-filter-search\"]', function (e) {\n  dropdownFilterSearch($(this));\n}); // Method to decode the encoded nested and/or complex hash and convert it to\n// object that is used for filters while sending the data to the backend.\n\nvar getParamsAsObject = function (query) {\n  query = query.substring(query.indexOf('?') + 1);\n  var re = /([^&=]+)=?([^&]*)/g;\n  var decodeRE = /\\+/g;\n\n  var decode = function (str) {\n    return decodeURIComponent(str.replace(decodeRE, \" \"));\n  };\n\n  var params = {},\n      e;\n\n  while (e = re.exec(query)) {\n    var k = decode(e[1]),\n        v = decode(e[2]);\n\n    if (k.substring(k.length - 2) === '[]') {\n      k = k.substring(0, k.length - 2);\n      (params[k] || (params[k] = [])).push(v);\n    } else params[k] = v;\n  }\n\n  var assign = function (obj, keyPath, value) {\n    var lastKeyIndex = keyPath.length - 1;\n\n    for (var i = 0; i < lastKeyIndex; ++i) {\n      var key = keyPath[i];\n      if (!(key in obj)) obj[key] = {};\n      obj = obj[key];\n    }\n\n    obj[keyPath[lastKeyIndex]] = value;\n  };\n\n  for (var prop in params) {\n    var structure = prop.split('[');\n\n    if (structure.length > 1) {\n      var levels = [];\n      structure.forEach(function (item, i) {\n        var key = item.replace(/[?[\\]\\\\ ]/g, '');\n        levels.push(key);\n      });\n      assign(params, levels, params[prop]);\n      delete params[prop];\n    }\n  }\n\n  return params;\n};\n\n$(document).on('click', '[data-behaviour=\"filter-input\"]', function (e) {\n  var filterType = $(this).data('filter-type');\n  var filterColumn = $(this).data('db-column');\n  var filterElement = $('[data-behaviour=\"filter\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']');\n\n  if (filterType == 'range') {\n    filterElement.parent().toggleClass('hidden');\n  } else if (filterType == 'multi_select') {\n    $(this).parent().children(':last').toggleClass('hidden');\n  } else if (filterType == 'date') {\n    filterElement.click();\n  }\n}); // Remove all the applied filters and reload the page\n\n$(document).on('click', '.clear-btn', function (e) {\n  window.location.href = window.location.href.split(\"?\")[0];\n});\n\nvar unhideClearFilterBtn = function (filterValue) {\n  if (filterValue) {\n    $('.clear-btn').removeClass('hidden');\n  }\n}; // Selecting options for single and multi select filters\n\n\n$(document).on('click', '[data-behaviour=\"select-option\"]', function (e) {\n  var filterType = $(this).data('filter-type');\n  var filterColumn = $(this).data('db-column');\n\n  if (filterType == 'single_select') {\n    var filterValue = $(this).data('value');\n\n    if (!this.classList.contains('selected')) {\n      if (this.parentNode.querySelector('.list-item.selected') != null) {\n        this.parentNode.querySelector('.list-item.selected').classList.remove('selected');\n      }\n\n      $(this).addClass('selected');\n    }\n\n    $(this).parents(':nth(4)').children(':first').children(':nth(1)').text(filterValue);\n    $(this).parents(':nth(4)').children(':first').children(':last').removeClass('hidden'); // Clear the search value post selection and regenerate the dropdown elements.\n\n    var searchInputElement = $(this).parents(':nth(1)').children(':first').children();\n    searchInputElement.val('');\n    dropdownFilterSearch(searchInputElement);\n    unhideClearFilterBtn(filterValue);\n    getFilteredData(filterType, filterValue, filterColumn);\n  } else if (filterType == 'multi_select') {\n    var parentChip = $(this).parent().siblings(':first');\n    var checkboxElement = $(this).find('.cm-checkbox');\n    checkboxElement.prop('checked', !checkboxElement.prop('checked'));\n    var checkedCount = $(this).parent().find('.cm-checkbox').filter(':checked').length;\n\n    if (checkboxElement.prop('checked')) {\n      var chip = $('<div class=\"chip\"></div>');\n      var firstSpan = $('<span></span>').text($(this).data('value'));\n      var secondSpan = $('<span data-behaviour=\"selected-chip\"><i class=\"fa fa-times\"></i></span>');\n      parentChip.prepend(chip.append(firstSpan).append(secondSpan));\n    } else {\n      var chipElement = parentChip.find('.chip');\n\n      for (var i = 0; i < chipElement.length; i++) {\n        if ($(chipElement[i]).text() == $(this).data('value')) {\n          $(chipElement[i]).remove();\n          break;\n        }\n      }\n    }\n\n    if (checkedCount > 0) {\n      parentChip.addClass('search-with-chips').removeClass('search-area');\n      $(this).parents(':nth(1)').children(':last').addClass('active');\n    } else {\n      parentChip.addClass('search-area').removeClass('search-with-chips');\n      $(this).parents(':nth(1)').children(':last').removeClass('active');\n    }\n  }\n}); // Apply button for multi select filters\n\n$(document).on('click', '.apply-area', function (e) {\n  var filterInputElement = $(this).parents(':nth(3)').children(':first');\n  var filterType = filterInputElement.data('filter-type');\n  var filterColumn = filterInputElement.data('db-column');\n  var filterValue = [];\n  var selectFilterElement = $('[data-behaviour=\"select-option\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']');\n  var checkedElements = selectFilterElement.find('.cm-checkbox').filter(':checked');\n\n  if (checkedElements.length > 0) {\n    for (var i = 0; i < checkedElements.length; i++) {\n      filterValue.push($(checkedElements[i]).parent().data('value'));\n    }\n\n    truncatedFilterValue = filterValue[0];\n\n    if (filterValue.length > 1) {\n      truncatedFilterValue += ' + ' + (filterValue.length - 1) + ' more';\n    }\n\n    filterInputElement.children(':nth(1)').text(truncatedFilterValue);\n    filterInputElement.children(':last').removeClass('hidden');\n    selectFilterElement.parents(':nth(3)').addClass('hidden'); // Clear the search value post selection and regenerate the dropdown elements.\n\n    var searchInputElement = $(this).parent().children(':first').children(':last');\n    searchInputElement.val('');\n    dropdownFilterSearch(searchInputElement);\n    unhideClearFilterBtn(filterValue);\n    getFilteredData(filterType, filterValue, filterColumn);\n  }\n}); // Remove single applied filter.\n\n$(document).on('click', '.filter-chip-remove', function (e) {\n  var url = window.location.pathname;\n  var filterType = $(this).parent().data('filter-type');\n  var filterColumn = $(this).parent().data('db-column');\n  var searchParams = window.location.search;\n\n  if (searchParams.length > 0) {\n    queryString = getParamsAsObject(searchParams);\n\n    if (queryString['filters'][filterType] != undefined) {\n      delete queryString['filters'][filterType][filterColumn];\n      var queryParam = jQuery.param(queryString);\n      window.history.pushState(\"\", \"\", url + '?' + queryParam);\n      window.location.reload();\n    }\n  }\n});\n$(document).on('click', '[data-behaviour=\"selected-chip\"]', function (e) {\n  var filterType = $(this).parents(':nth(5)').find('.filter-chip').data('filter-type');\n  var filterColumn = $(this).parents(':nth(5)').find('.filter-chip').data('db-column');\n  var filterValue = $(this).siblings().text();\n  var selectElement = $('[data-behaviour=\"select-option\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']');\n  $(this).parent().remove();\n\n  for (var i = 0; i < selectElement.length; i++) {\n    if ($(selectElement[i]).data('value') == filterValue) {\n      var checkboxElement = $(selectElement[i]).find('.cm-checkbox');\n      checkboxElement.prop('checked', !checkboxElement.prop('checked'));\n      break;\n    }\n  }\n\n  var checkedCount = $(selectElement).find('.cm-checkbox').filter(':checked').length;\n\n  if (checkedCount < 1) {\n    $(selectElement).parent().siblings(':first').addClass('search-area').removeClass('search-with-chips');\n    $(selectElement).parent().siblings(':last').removeClass('active');\n  }\n});","map":{"version":3,"sources":["/Users/vidya/Documents/Projects/cm-admin/app/javascript/packs/cm_admin/filters.js"],"names":["currentRequest","getFilteredData","filterType","filterValue","filterColumn","url","window","location","pathname","filterParams","queryString","filters","page","searchParams","search","length","getParamsAsObject","undefined","jQuery","param","availableParams","$","ajax","type","data","beforeSend","abort","success","queryParam","history","pushState","html","error","jqxhr","textStatus","errorThrown","console","log","dropdownFilterSearch","element","filter","val","toUpperCase","dropdownElements","parents","find","children","i","txtValue","text","indexOf","css","document","on","e","rangeElements","parent","removeClass","unhideClearFilterBtn","stopPropagation","searchValue","searchInputElement","unhideFilter","filterInputElement","click","query","substring","re","decodeRE","decode","str","decodeURIComponent","replace","params","exec","k","v","push","assign","obj","keyPath","value","lastKeyIndex","key","prop","structure","split","levels","forEach","item","filterElement","toggleClass","href","classList","contains","parentNode","querySelector","remove","addClass","parentChip","siblings","checkboxElement","checkedCount","chip","firstSpan","secondSpan","prepend","append","chipElement","selectFilterElement","checkedElements","truncatedFilterValue","reload","selectElement"],"mappings":"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","sourcesContent":["var currentRequest = null;\n\n// Main method which will structure the existing filter values with the newly\n// applied filter. Send and receive the value from the backend.\nvar getFilteredData = function(filterType, filterValue, filterColumn=null) {\n  var url = window.location.pathname\n\n  // Based on the value changed for recent filter generate the filterParams hash\n  var filterParams = {};\n  if (filterColumn) {\n    filterParams[filterType] = {};\n    filterParams[filterType][filterColumn] = filterValue\n  } else {\n    filterParams[filterType] = filterValue\n  }\n\n  // TODO add sort params in the queryString\n  // page params is reinitialized to 1 when any new filter value is applied so\n  // that it won't throw the error when the user doesn't have sufficent data\n  // to display on the table.\n  var queryString = {\n    filters: filterParams,\n    page: 1\n  };\n\n  // Generate the queryString by concatenating the filterParams and\n  // searchParams that are already applied, if searchParams are present.\n  var searchParams = window.location.search\n  if (searchParams.length > 0) {\n    // Delete the previous applied value for multi_select filter from the\n    // searchParams as altering the array with new and old value will create\n    // more complicated logic. The new value is passed and structured in\n    // filterParams and will be concadinated with the searchParams post deletion\n    if (filterType == 'multi_select') {\n      searchParams = getParamsAsObject(searchParams)\n      if (searchParams['filters'][filterType] != undefined) {\n        delete(searchParams['filters'][filterType][filterColumn])\n      }\n      searchParams = jQuery.param(searchParams)\n    }\n    filterParams = jQuery.param(queryString)\n    var availableParams = searchParams + '&' + filterParams\n    queryString = getParamsAsObject(availableParams)\n  }\n\n  return currentRequest = $.ajax(url, {\n    type: 'GET',\n    data: queryString,\n    beforeSend: function() {\n      if (currentRequest !== null) {\n        currentRequest.abort();\n      }\n    },\n    success: function(data) {\n      var queryParam = jQuery.param(queryString)\n      window.history.pushState(\"\", \"\", url + '?' + queryParam);\n      $('.index-page__table-container').html(data);\n    },\n    error: function(jqxhr, textStatus, errorThrown) {\n      console.log(errorThrown, textStatus);\n    }\n  });\n}\n\n// Generate or remove elements of the dropdown based on the search value.\nvar dropdownFilterSearch = function(element) {\n  var filter = element.val().toUpperCase();\n  var dropdownElements = element.parents(':nth(1)').find('.list-area').children();\n  for (var i = 0; i < dropdownElements.length; i++) {\n    txtValue = $(dropdownElements[i]).children().text();\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n      $(dropdownElements[i]).css('display', 'flex');\n    } else {\n      $(dropdownElements[i]).css('display', 'none');\n    }\n  }\n};\n\n$(document).on('change', '[data-behaviour=\"filter\"]', function(e) {\n  var filterType = $(this).data('filter-type')\n  var filterColumn = $(this).data('db-column')\n\n  if (filterType == 'range') {\n    var rangeElements = $(this).parent().children()\n    var filterValue = $(rangeElements[0]).val() + ' to ' + $(rangeElements[1]).val()\n  } else {\n    var filterValue = $(this).val()\n  }\n\n  $(this).parents(':nth(1)').children(':first').children(':nth(1)').text(filterValue)\n  $(this).parents(':nth(1)').children(':first').children(':last').removeClass('hidden')\n\n  unhideClearFilterBtn(filterValue)\n  getFilteredData(filterType, filterValue, filterColumn)\n});\n\n$(document).on('keyup', '.search-input', function(e) {\n  e.stopPropagation();\n\n  var searchValue = $(this).val();\n  unhideClearFilterBtn(searchValue)\n  getFilteredData('search', searchValue)\n});\n\n$(document).on('click', '[data-behaviour=\"filter-option\"]', function(e) {\n  var filterType = $(this).data('filter-type')\n  var filterColumn = $(this).data('db-column')\n\n  // Clear the search value post selection and regenerate the dropdown elements.\n  var searchInputElement = $(this).parents(':nth(1)').children(':first').children()\n  searchInputElement.val('')\n  dropdownFilterSearch(searchInputElement)\n\n  unhideFilter(filterType, filterColumn)\n});\n\nvar unhideFilter = function(filterType, filterColumn) {\n  var filterInputElement = $('[data-behaviour=\"filter-input\"][data-filter-type=' + filterType + '][data-db-column='+ filterColumn + ']')\n\n  filterInputElement.parent().removeClass('hidden');\n  filterInputElement.click()\n};\n\n// Search inside the dropdowns\n$(document).on('keyup', '[data-behaviour=\"dropdown-filter-search\"]', function(e) {\n  dropdownFilterSearch($(this))\n});\n\n// Method to decode the encoded nested and/or complex hash and convert it to\n// object that is used for filters while sending the data to the backend.\nvar getParamsAsObject = function (query) {\n  query = query.substring(query.indexOf('?') + 1);\n\n  var re = /([^&=]+)=?([^&]*)/g;\n  var decodeRE = /\\+/g;\n\n  var decode = function (str) {\n    return decodeURIComponent(str.replace(decodeRE, \" \"));\n  };\n\n  var params = {}, e;\n  while (e = re.exec(query)) {\n    var k = decode(e[1]), v = decode(e[2]);\n    if (k.substring(k.length - 2) === '[]') {\n      k = k.substring(0, k.length - 2);\n      (params[k] || (params[k] = [])).push(v);\n    }\n    else params[k] = v;\n  }\n\n  var assign = function (obj, keyPath, value) {\n    var lastKeyIndex = keyPath.length - 1;\n    for (var i = 0; i < lastKeyIndex; ++i) {\n      var key = keyPath[i];\n      if (!(key in obj))\n        obj[key] = {}\n      obj = obj[key];\n    }\n    obj[keyPath[lastKeyIndex]] = value;\n  }\n\n  for (var prop in params) {\n    var structure = prop.split('[');\n    if (structure.length > 1) {\n      var levels = [];\n      structure.forEach(function (item, i) {\n        var key = item.replace(/[?[\\]\\\\ ]/g, '');\n        levels.push(key);\n      });\n      assign(params, levels, params[prop]);\n      delete(params[prop]);\n    }\n  }\n  return params;\n};\n\n$(document).on('click', '[data-behaviour=\"filter-input\"]', function(e) {\n  var filterType = $(this).data('filter-type')\n  var filterColumn = $(this).data('db-column')\n\n  var filterElement = $('[data-behaviour=\"filter\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn +']')\n\n  if (filterType == 'range') {\n    filterElement.parent().toggleClass('hidden')\n  } else if (filterType == 'multi_select') {\n    $(this).parent().children(':last').toggleClass('hidden')\n  } else if (filterType == 'date') {\n    filterElement.click()\n  }\n})\n\n// Remove all the applied filters and reload the page\n$(document).on('click', '.clear-btn', function(e) {\n  window.location.href = window.location.href.split(\"?\")[0]\n})\n\nvar unhideClearFilterBtn = function(filterValue) {\n  if (filterValue) {\n    $('.clear-btn').removeClass('hidden')\n  }\n}\n\n// Selecting options for single and multi select filters\n$(document).on('click', '[data-behaviour=\"select-option\"]', function(e) {\n  var filterType = $(this).data('filter-type')\n  var filterColumn = $(this).data('db-column')\n\n  if (filterType == 'single_select') {\n    var filterValue = $(this).data('value')\n    if (!this.classList.contains('selected')) {\n      if (this.parentNode.querySelector('.list-item.selected') != null) {\n        this.parentNode.querySelector('.list-item.selected').classList.remove('selected');\n      }\n      $(this).addClass('selected')\n    }\n\n    $(this).parents(':nth(4)').children(':first').children(':nth(1)').text(filterValue)\n    $(this).parents(':nth(4)').children(':first').children(':last').removeClass('hidden')\n\n    // Clear the search value post selection and regenerate the dropdown elements.\n    var searchInputElement = $(this).parents(':nth(1)').children(':first').children()\n    searchInputElement.val('')\n    dropdownFilterSearch(searchInputElement)\n\n    unhideClearFilterBtn(filterValue)\n    getFilteredData(filterType, filterValue, filterColumn)\n  }\n  else if (filterType == 'multi_select') {\n    var parentChip = $(this).parent().siblings(':first')\n    var checkboxElement = $(this).find('.cm-checkbox')\n    checkboxElement.prop('checked', !checkboxElement.prop('checked'))\n    var checkedCount = $(this).parent().find('.cm-checkbox').filter(':checked').length\n\n    if (checkboxElement.prop('checked')) {\n      var chip = $('<div class=\"chip\"></div>')\n      var firstSpan = $('<span></span>').text($(this).data('value'))\n      var secondSpan = $('<span data-behaviour=\"selected-chip\"><i class=\"fa fa-times\"></i></span>')\n      parentChip.prepend(chip.append(firstSpan).append(secondSpan))\n    } else {\n      var chipElement = parentChip.find('.chip')\n      for(var i = 0; i < chipElement.length; i++) {\n        if ($(chipElement[i]).text() == $(this).data('value')) {\n          $(chipElement[i]).remove()\n          break\n        }\n      }\n    }\n\n    if (checkedCount > 0) {\n      parentChip.addClass('search-with-chips').removeClass('search-area')\n      $(this).parents(':nth(1)').children(':last').addClass('active')\n    } else {\n      parentChip.addClass('search-area').removeClass('search-with-chips')\n      $(this).parents(':nth(1)').children(':last').removeClass('active')\n    }\n  }\n});\n\n// Apply button for multi select filters\n$(document).on('click', '.apply-area', function(e) {\n  var filterInputElement = $(this).parents(':nth(3)').children(':first')\n  var filterType = filterInputElement.data('filter-type')\n  var filterColumn = filterInputElement.data('db-column')\n  var filterValue = []\n\n  var selectFilterElement = $('[data-behaviour=\"select-option\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']')\n  var checkedElements = selectFilterElement.find('.cm-checkbox').filter(':checked')\n\n  if (checkedElements.length > 0) {\n    for(var i = 0; i < checkedElements.length; i++) {\n      filterValue.push($(checkedElements[i]).parent().data('value'))\n    }\n\n    truncatedFilterValue = filterValue[0]\n    if (filterValue.length > 1) {\n      truncatedFilterValue += ' + ' + (filterValue.length - 1) + ' more'\n    }\n\n    filterInputElement.children(':nth(1)').text(truncatedFilterValue)\n    filterInputElement.children(':last').removeClass('hidden')\n    selectFilterElement.parents(':nth(3)').addClass('hidden')\n\n    // Clear the search value post selection and regenerate the dropdown elements.\n    var searchInputElement = $(this).parent().children(':first').children(':last')\n    searchInputElement.val('')\n    dropdownFilterSearch(searchInputElement)\n\n    unhideClearFilterBtn(filterValue)\n    getFilteredData(filterType, filterValue, filterColumn)\n  }\n});\n\n// Remove single applied filter.\n$(document).on('click', '.filter-chip-remove', function(e) {\n  var url = window.location.pathname\n  var filterType = $(this).parent().data('filter-type')\n  var filterColumn = $(this).parent().data('db-column')\n\n  var searchParams = window.location.search\n  if (searchParams.length > 0) {\n    queryString = getParamsAsObject(searchParams)\n    if (queryString['filters'][filterType] != undefined) {\n      delete(queryString['filters'][filterType][filterColumn])\n      var queryParam = jQuery.param(queryString)\n      window.history.pushState(\"\", \"\", url + '?' + queryParam);\n      window.location.reload()\n    }\n  }\n});\n\n$(document).on('click', '[data-behaviour=\"selected-chip\"]', function(e) {\n  var filterType = $(this).parents(':nth(5)').find('.filter-chip').data('filter-type')\n  var filterColumn = $(this).parents(':nth(5)').find('.filter-chip').data('db-column')\n  var filterValue = $(this).siblings().text()\n\n  var selectElement = $('[data-behaviour=\"select-option\"][data-filter-type=' + filterType + '][data-db-column=' + filterColumn + ']')\n  $(this).parent().remove()\n\n  for(var i = 0; i < selectElement.length; i++) {\n    if ($(selectElement[i]).data('value') == filterValue) {\n      var checkboxElement = $(selectElement[i]).find('.cm-checkbox')\n      checkboxElement.prop('checked', !checkboxElement.prop('checked'))\n      break\n    }\n  }\n\n  var checkedCount = $(selectElement).find('.cm-checkbox').filter(':checked').length\n  if (checkedCount < 1) {\n    $(selectElement).parent().siblings(':first').addClass('search-area').removeClass('search-with-chips')\n    $(selectElement).parent().siblings(':last').removeClass('active')\n  }\n})\n\n"]},"metadata":{},"sourceType":"module"}